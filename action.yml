name: 'Run Elementary'
author: 'Elementary Data'
description: 'Monitor your dbt project and be the first to know of data issues.'

branding:
  icon: 'activity'
  color: 'red'

inputs:
  adapter:
    description: 'Adapter of your warehouse (snowflake, bigquery, redshift, etc)'
    required: true
  profiles-yml:
    description: |
      dbt's `profiles.yml` with the `elementary` profile.
      Can be generated by running `dbt run-operation elementary.generate_elementary_cli_profile` within your project.
    required: true
  edr-command:
    description: 'Command to run, for example `edr monitor --slack-webhook <SECRET_SLACK_WEBHOOK>`.'
    required: true

  bigquery-keyfile:
    description: 'Content of your BigQuery keyfile.'
    required: false
  gcs-keyfile:
    description: 'Content of your Google service account keyfile, for usage with Google Cloud Storage.'
    required: false
  target:
    description: 'Target of your elementary profile.'
    required: false


runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ${{ inputs.adapter }}
    - ${{ inputs.profiles-yml }}
    - ${{ inputs.edr-command }}
    - ${{ inputs.bigquery-keyfile }}
    - ${{ inputs.gcs-keyfile }}
    - ${{ inputs.target }}
